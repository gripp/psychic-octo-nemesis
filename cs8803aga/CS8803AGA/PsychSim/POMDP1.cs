using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;


namespace CS8803AGA.PsychSim
{
    class POMDP1
    {
        public double[,] t_model;
        public double[] state;
        public double[,] senses;

        public POMDP1()
        {
            //				                          (1,1)(1,2)(1,3)(2,1)(2,3)(3,1)(3,2)(3,3)(4,1)(4,2)(4,3)	  
            t_model = new double[11, 11] {           { 0.9, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.8, 0.0, 0.0, 0.2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.8, 0.0, 0.1, 0.1, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.0, 0.0, 0.8, 0.0, 0.0, 0.1, 0.1, 0.0 },
                                                     { 0.1, 0.8, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.8, 0.1, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8, 0.0, 0.1, 0.0, 0.1 },
                                                     { 0.0, 0.1, 0.9, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.8, 0.0, 0.2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.0, 0.8, 0.0, 0.1, 0.1, 0.0, 0.0, 0.0 },
                                                     { 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.8, 0.0, 0.1, 0.1 }};

            //				            (1,1)   (1,2) (1,3)  (2,1)  (2,3)  (3,1)  (3,2)  (3,3)  (4,1) (4,2)(4,3)	  
            state = new double[] { 0.111, 0.111, 0.111, 0.111, 0.111, 0.111, 0.111, 0.111, 0.111, 0.0, 0.0 };

            //				              (1,1)(1,2)(1,3)(2,1)(2,3)(3,1)(3,2)(3,3)(4,1)(4,2)(4,3)	  
            senses = new double[2, 11] { { 0.1, 0.1, 0.1, 0.1, 0.1, 0.9, 0.9, 0.9, 0.1, 0.9, 0.1 } ,
                                         { 0.9, 0.9, 0.9, 0.9, 0.9, 0.1, 0.1, 0.1, 0.9, 0.1, 0.9 }};

        }


        public double[] func(int evidance)
        {
            double[] temp = new double[11];

            for (int i = 0; i < 11; i++)
            {
                for (int j = 0; j < 11; j++)
                {
                    temp[j] += state[i] * t_model[i, j];
                }
            }
            double alpha = 1.56;


            for (int i = 0; i < 11; i++)
            {
                state[i] = alpha * senses[evidance - 1, i] * temp[i];
            }

            return state;
        }

    }
}
